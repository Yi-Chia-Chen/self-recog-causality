const PHYSICAL_TRIGGER_DIST = 10;
const SOCIAL_TRIGGER_DIST = 100;
const DISK_SPEED = 2;
const OTHER_TRAJECTORY_SPEED = 5;
const OTHER_TRAJECTORY = { "0.294": {x: 569, y: 427}, "0.314": {x: 569, y: 426}, "0.332": {x: 572, y: 422}, "0.346": {x: 577, y: 418}, "0.362": {x: 578, y: 416}, "0.384": {x: 583, y: 409}, "0.396": {x: 589, y: 400}, "0.412": {x: 592, y: 396}, "0.429": {x: 594, y: 393}, "0.446": {x: 597, y: 391}, "0.463": {x: 600, y: 387}, "0.48": {x: 602, y: 386}, "0.496": {x: 603, y: 383}, "0.513": {x: 605, y: 381}, "0.528": {x: 606, y: 379}, "0.545": {x: 607, y: 377}, "0.562": {x: 608, y: 375}, "0.579": {x: 609, y: 373}, "0.595": {x: 610, y: 371}, "0.612": {x: 612, y: 369}, "0.63": {x: 613, y: 368}, "0.646": {x: 614, y: 367}, "0.669": {x: 614, y: 367}, "0.692": {x: 614, y: 367}, "0.701": {x: 614, y: 366}, "0.717": {x: 615, y: 366}, "0.728": {x: 615, y: 366}, "0.746": {x: 615, y: 366}, "0.762": {x: 616, y: 366}, "0.779": {x: 616, y: 366}, "0.797": {x: 616, y: 365}, "0.813": {x: 617, y: 365}, "0.83": {x: 617, y: 365}, "0.879": {x: 618, y: 365}, "0.896": {x: 618, y: 365}, "0.912": {x: 618, y: 367}, "0.928": {x: 619, y: 369}, "0.948": {x: 620, y: 373}, "0.962": {x: 622, y: 376}, "1.015": {x: 625, y: 380}, "1.019": {x: 628, y: 385}, "1.031": {x: 637, y: 394}, "1.047": {x: 637, y: 395}, "1.067": {x: 639, y: 398}, "1.079": {x: 641, y: 401}, "1.096": {x: 642, y: 404}, "1.112": {x: 644, y: 406}, "1.128": {x: 646, y: 408}, "1.145": {x: 647, y: 410}, "1.164": {x: 648, y: 412}, "1.179": {x: 650, y: 414}, "1.195": {x: 652, y: 416}, "1.212": {x: 654, y: 417}, "1.229": {x: 656, y: 419}, "1.248": {x: 659, y: 422}, "1.264": {x: 662, y: 425}, "1.279": {x: 664, y: 427}, "1.297": {x: 666, y: 430}, "1.313": {x: 668, y: 432}, "1.329": {x: 669, y: 434}, "1.345": {x: 669, y: 434}, "1.364": {x: 670, y: 435}, "1.429": {x: 670, y: 435}, "1.445": {x: 670, y: 435}, "1.464": {x: 671, y: 435}, "1.478": {x: 672, y: 435}, "1.496": {x: 674, y: 435}, "1.512": {x: 675, y: 434}, "1.529": {x: 677, y: 434}, "1.544": {x: 678, y: 433}, "1.564": {x: 681, y: 432}, "1.579": {x: 683, y: 431}, "1.595": {x: 684, y: 429}, "1.613": {x: 686, y: 427}, "1.63": {x: 689, y: 423}, "1.646": {x: 691, y: 420}, "1.662": {x: 694, y: 415}, "1.679": {x: 697, y: 411}, "1.695": {x: 699, y: 407}, "1.712": {x: 701, y: 404}, "1.73": {x: 703, y: 401}, "1.745": {x: 705, y: 398}, "1.763": {x: 707, y: 395}, "1.778": {x: 710, y: 391}, "1.795": {x: 712, y: 388}, "1.812": {x: 714, y: 385}, "1.829": {x: 716, y: 381}, "1.845": {x: 716, y: 378}, "1.864": {x: 717, y: 375}, "1.879": {x: 718, y: 373}, "1.895": {x: 719, y: 372}, "1.913": {x: 720, y: 371}, "1.929": {x: 720, y: 370}, "1.946": {x: 720, y: 370}, "1.964": {x: 720, y: 369}, "1.978": {x: 720, y: 369}, "1.995": {x: 720, y: 369}, "2.012": {x: 721, y: 369}, "2.062": {x: 721, y: 368}, "2.078": {x: 721, y: 368}, "2.094": {x: 722, y: 368}, "2.112": {x: 723, y: 368}, "2.128": {x: 724, y: 372}, "2.146": {x: 727, y: 376}, "2.162": {x: 730, y: 382}, "2.178": {x: 733, y: 387}, "2.196": {x: 736, y: 392}, "2.211": {x: 740, y: 396}, "2.228": {x: 745, y: 401}, "2.245": {x: 747, y: 403}, "2.264": {x: 749, y: 405}, "2.278": {x: 751, y: 406}, "2.294": {x: 753, y: 408}, "2.312": {x: 755, y: 410}, "2.328": {x: 757, y: 412}, "2.345": {x: 759, y: 413}, "2.362": {x: 761, y: 416}, "2.378": {x: 763, y: 418}, "2.395": {x: 765, y: 421}, "2.412": {x: 767, y: 423}, "2.429": {x: 770, y: 426}, "2.445": {x: 771, y: 427}, "2.464": {x: 772, y: 427}, "2.478": {x: 772, y: 428}, "2.573": {x: 773, y: 428}, "2.621": {x: 773, y: 428}, "2.629": {x: 773, y: 428}, "2.645": {x: 773, y: 428}, "2.662": {x: 775, y: 427}, "2.68": {x: 778, y: 425}, "2.696": {x: 783, y: 420}, "2.713": {x: 788, y: 415}, "2.728": {x: 793, y: 408}, "2.745": {x: 796, y: 403}, "2.764": {x: 799, y: 399}, "2.778": {x: 800, y: 395}, "2.795": {x: 802, y: 393}, "2.812": {x: 804, y: 390}, "2.828": {x: 805, y: 389}, "2.845": {x: 805, y: 389}, "2.864": {x: 806, y: 388}, "2.879": {x: 806, y: 386}, "2.895": {x: 807, y: 385}, "2.912": {x: 809, y: 383}, "2.932": {x: 811, y: 380}, "2.945": {x: 814, y: 377}, "2.962": {x: 818, y: 374}, "2.978": {x: 820, y: 372}, "2.996": {x: 822, y: 371}, "3.013": {x: 823, y: 370}, "3.03": {x: 823, y: 370}, "3.099": {x: 824, y: 370}, "3.113": {x: 824, y: 370}, "3.128": {x: 824, y: 370}, "3.146": {x: 825, y: 372}, "3.163": {x: 827, y: 375}, "3.178": {x: 829, y: 379}, "3.197": {x: 833, y: 385}, "3.213": {x: 836, y: 389}, "3.23": {x: 839, y: 394}, "3.246": {x: 844, y: 400}, "3.264": {x: 848, y: 405}, "3.28": {x: 852, y: 409}, "3.296": {x: 856, y: 414}, "3.311": {x: 860, y: 418}, "3.329": {x: 862, y: 421}, "3.345": {x: 864, y: 423}, "3.363": {x: 865, y: 424}, "3.381": {x: 866, y: 425}};
const TARGET_LIST_DICT = {
    0: {feedback: "other", consequence: "physical"},
    1: {feedback: "other", consequence: "social"},
    2: {feedback: "other", consequence: "no"},
    3: {feedback: "self", consequence: "physical"},
    4: {feedback: "self", consequence: "social"},
    5: {feedback: "self", consequence: "no"},
};
var canvas, ctx;
var globalID;
var trialIndex = 0;
var tracingTask;



$(document).ready(function() {
    SETUP_TRACING_CANVAS();
    SHOW_INTRO();
});

function START_TRIAL() {
    SETUP_TRACING_INTERFACE();
    var trialInfo = TARGET_LIST_DICT[trialIndex];
    if (trialInfo["feedback"] == "other"){
        tracingTask = new otherTrajectoryObject(trialInfo["consequence"]);
        $("#start").click(tracingTask.start);

    } else if (trialInfo["feedback"] == "self") {
        tracingTask = new selfTrajectoryObject(trialInfo["consequence"]);
        $("#start").click(tracingTask.start);
    }
    SHOW_TRACING_TASK();
    trialIndex++;
}


function VECTOR_LENGTH(x_diff, y_diff) {
    return Math.sqrt(Math.pow(x_diff, 2) + Math.pow(y_diff, 2));
}
